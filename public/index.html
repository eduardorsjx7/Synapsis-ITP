<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Dashboard de Atendimentos</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 2rem;
      background-color: #f9f9f9;
    }

    h1 {
      text-align: center;
      margin-bottom: 2rem;
    }

    .charts-container {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
    }

    .chart {
      width: 45%;
      height: 400px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      padding: 1rem;
    }
  </style>
</head>
<body>
  <h1>Dashboard de Atendimentos</h1>
  <div class="charts-container">
    <div id="tempo-resolucao-chart" class="chart"></div>
    <div id="interacoes-chart" class="chart"></div>
  </div>

  <script>
    // Carregar os dados do arquivo JSON
    fetch('./data/dados_atendimento.json')
      .then(response => response.json())
      .then(dados => {
        // Processar os dados para os gráficos
        const categorias = dados.map(item => item.codigo_atendimento);
        const tempoResolucao = dados.map(item => item.tempo_resolucao_hrs);
        const interacoes = dados.map(item => item.interacoes);

        // Gráfico 1: Tempo de Resolução por Atendimento (Área)
        const resolucaoChart = echarts.init(document.getElementById('tempo-resolucao-chart'));
        const resolucaoOptions = {
          title: {
            text: 'Tempo de Resolução por Atendimento',
            left: 'center'
          },
          tooltip: {
            trigger: 'axis'
          },
          xAxis: {
            type: 'category',
            data: categorias,
            name: 'Código Atendimento'
          },
          yAxis: {
            type: 'value',
            name: 'Tempo (hrs)'
          },
          series: [
            {
              data: tempoResolucao,
              type: 'line', // Mantém o tipo de linha
              areaStyle: {}, // Adiciona estilo de área para transformar em gráfico de área
              name: 'Tempo de Resolução',
              itemStyle: {
                color: '#5470C6'
              }
            }
          ]
        };
        resolucaoChart.setOption(resolucaoOptions);

        // Gráfico 2: Interações por Atendimento (Dispersão)
        const interacoesChart = echarts.init(document.getElementById('interacoes-chart'));
        const interacoesOptions = {
          title: {
            text: 'Interações por Atendimento',
            left: 'center'
          },
          tooltip: {
            trigger: 'item'
          },
          xAxis: {
            type: 'category',
            data: categorias,
            name: 'Código Atendimento'
          },
          yAxis: {
            type: 'value',
            name: 'Interações'
          },
          series: [
            {
              data: interacoes.map((value, index) => [categorias[index], value]),
              type: 'scatter', // Alterado para gráfico de dispersão
              name: 'Interações',
              itemStyle: {
                color: '#91CC75'
              }
            }
          ]
        };
        interacoesChart.setOption(interacoesOptions);
      })
      .catch(error => console.error('Erro ao carregar os dados:', error));
  </script>
</body>
</html>
